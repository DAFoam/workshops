\documentclass{bredelebeamer}
\usepackage{graphicx}
\usepackage{amsmath,amsfonts,amsthm}
\usepackage{hyperref}
\usepackage{setspace}
\usepackage{makecell}
%\usepackage{media9} % for movies
%\usepackage{multimedia} % for movies
\usepackage{caption} % for figure caption
\usepackage{animate}
\usepackage[final]{listings} % for listing source code
\usefonttheme[onlymath]{serif} % make the equations look better
% define box for listing
\definecolor{myblue}{HTML}{4C72B0}
\definecolor{myred}{HTML}{C54E52}
\definecolor{mygreen}{HTML}{56A968}
\lstset{
      language=C++,
      basicstyle=\ttfamily,
      frame=single,
      columns=flexible,
      breaklines=true,
      commentstyle=\color{mygreen},
      keywordstyle = \color{myblue},
      stringstyle  = \color{orange},
      }
\usepackage[absolute,overlay]{textpos} 
\setlength{\parskip}{0.9em}
\setbeamertemplate{navigation symbols}{}
\newcommand*\dif{\mathop{}\!\mathrm{d}}
%%%%%%%%% some settings
\captionsetup[figure]{labelformat=empty} % remove the prefix 'figure' for figure caption
\captionsetup[table]{labelformat=empty} % remove the prefix 'table' for figure caption
\setbeamertemplate{headline}{} %%%%%%%%%%% remove header %%%%%%%%%%%
\setbeamerfont{frametitle}{size=\Large} %% title font size
\renewcommand{\arraystretch}{1.5} % line space in a table
%%%%%%%%%% title
\title[ ]{DAFoam Workshop 2025}
\subtitle{v4.0.2}

\author{Ping He\\ ~ \\August 14, 2025 }


\date[August 14, 2025]{}

\setbeamercolor{title}{fg=Black,bg=White!0}
\setbeamercolor{frametitle}{fg=Black,bg=White!0}
%gets rid of footer
%will override 'frame number' instruction above
%comment out to revert to previous/default definitions
\setbeamertemplate{footline}[page number]

\begin{document}

%---------------------------------------------------------------%
\begin{frame}
  \titlepage
\end{frame}

%---------------------------------------------------------------%


%---------------------------------------------------------------%
\begin{frame}{Objectives}

After this workshop, you should be able to
\begin{itemize}
  \setlength\itemsep{1em}
 \item Identify the new APIs in runScript.py in DAFoam v4
 \item Get familiar with the new code structure in DAFoam v4 
 \item Run tutorials and add new features to DAFoam v4
\end{itemize} 

\end{frame}
%---------------------------------------------------------------%


%---------------------------------------------------------------%
\begin{frame}{Outline}

\textbf{Part 1: User-Focused Features}
\begin{itemize}
  \setlength\itemsep{1em}
 \item Overview of new run scripts, APIs, and solver options
 \item Walkthrough of selected tutorials
\end{itemize}

\textbf{Part 2: Developer-Focused Updates}
\begin{itemize}
  \setlength\itemsep{1em}
 \item Introduction to the updated code structure
 \item Examples of extending DAFoam (e.g., adding new design variables)
\end{itemize}

Note: We assume you are familiar with DAFoam v3 and will mainly focus on the new features in v4.

\end{frame}
%---------------------------------------------------------------%

%---------------------------------------------------------------%
\begin{frame}{}

  \begin{center}
     \noindent \Large{Part 1: User-Focused Features}
  \end{center}

  \begin{center}
    \noindent \large{Motivation: let the DAFoam APIs be more consistent with the OpenMDAO standard.}
 \end{center}

  

  
  \end{frame}
  %---------------------------------------------------------------%


%---------------------------------------------------------------%
\begin{frame}{Overview of the changes in v4 runScript.py}

DAFoam v2 scripts are completely deprecated, but v3 scripts can be used with minor changes. Let us compare runScript\_v3.py and runScript\_v4.py in examples/NACA0012

\begin{itemize}

  \item The \texttt{-task} flag is changed to be consistent with OpenMDAO
  \item \texttt{objFunc} is replaced with \texttt{function} in \texttt{daOption}.
  \item \texttt{addToAdjoint} is no longer needed in \texttt{function}.
  \item \texttt{alphaName} is replaced with \texttt{patchVelocityInputName} for the angle of attack definition for force (e.g., CD and CL) \texttt{function}.
  \item \texttt{designVar} is replaced with \texttt{inputInfo} in \texttt{daOption}.
  \item The aoa function is defined in \texttt{inputInfo} instead of \texttt{configure}
  \item A new way to define shape for 2D airfoil using \texttt{non\_addShapeFunctionDV}.
\end{itemize}

\end{frame}
%---------------------------------------------------------------%

%---------------------------------------------------------------%
\begin{frame}{Details for the new \texttt{inputInfo} key in \texttt{daOptions}}

  \texttt{inputInfo} defines the input variables for a component in OpenMDAO. Let us check runScript\_test\_inputInto.py in examples/NACA0012
  
  \begin{itemize}
  
    \item Each key in \texttt{inputInfo} defines an input variable for a component, specified by the \texttt{components} key. Note: one input can be connected to multiple components.
    \item The name of the key in \texttt{inputInfo} is the name of the input for that component. Run the script and check the N2 diagram in mphys\_n2.html.
    \item The \texttt{type} key defines the type of this input. Check all available input types from examples/dafoam-4.0.2/src/adjoint/DAInput/*.H
    \item Each input type has its own customized keys, such as \texttt{patches}, \texttt{fieldName}, and \texttt{distributed}.
    \item Once an input is defined in \texttt{inputInfo}, we can connect dvs.output to it. Check line 163 in runScript\_test\_inputInto.py
    \item NOTE: Carefully define the inputs to avoid conflicts!
  \end{itemize}
  
  \end{frame}
  %---------------------------------------------------------------%


\end{document}
